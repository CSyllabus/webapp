<div class="mdl-grid demo-content" *ngIf="user">
  <div class="emo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-card">
    <div class="mdl-card__title">
      <h2 class="mdl-card__title-text mdl-color-text--primary">User properties</h2>
    </div>
    <div class="mdl-card__supporting-text mdl-grid">
      <div class="mdl-cell mdl-cell--6-col-desktop">
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <label class="mdl-textfield__label">Username: </label>
          <input class="mdl-textfield__input" type="text"
                 [(ngModel)]="user.username" placeholder="Enter string">
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-1">
            <span class="mdl-switch__label">Admin</span>
            <input type="checkbox" id="switch-1" class="mdl-switch__input"  [(ngModel)]="user.admin" >
          </label>
        </div>
        <div class="mdl-cell">
          <label class="mdl-color-text--primary" for="main_img_img">Profilna slika: </label>
          <div style="text-align: center; padding: 20px;">
            <img id="main_img_img" src="{{dataUrl}}/img/user/{{user._id}}/{{user.profile_img}}" height="150">
          </div>
          <button id="main_image_btn" class="mdl-button mdl-js-button mdl-button--primary"
                  ng-click="group.changed = 1">
            ODABERI DATOTEKU
          </button>
          <input class="mdl-textfield__input" type="file"
                 name="main_image" id="main_image"
                 [(ngModel)]="user.img"
                 ng-change="group.changed = 1">
        </div>
      </div>
      <div class="mdl-cell mdl-cell--6-col-desktop">
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <label class="mdl-textfield__label">Password: </label>
          <input class="mdl-textfield__input" type="password"
                 [(ngModel)]="user.password">
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             ng-if="changePassword">
          <label class="mdl-textfield__label">New password: </label>
          <input class="mdl-textfield__input" type="password"
                 [(ngModel)]="user.newPassword" >
        </div>
        <br>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"
             ng-if="changePassword">
          <label class="mdl-textfield__label">Repeat password: </label>
          <input class="mdl-textfield__input" type="password"
                 [(ngModel)]="user.newPassword2">
        </div>
        <button class="mdl-button mdl-js-button mdl-button--primary"
                ng-class="changePassword ? 'mdl-button--raised': ''"
                ng-click="togglePassword()">
          Change password <i class="material-icons">lock</i>
        </button>
      </div>
      <br>
    </div>
    <div class="mdl-card__actions mdl-card--border" style="text-align: center;">
      <button class="mdl-button mdl-js-button mdl-color-text--primary"
              ng-click="saveUserData(0)"
              ng-disabled="group.changed == 0">
        SAČUVAJ
      </button>
      <button class="mdl-button mdl-js-button mdl-color-text--primary"
              ng-click="saveUserData(1)"
              ng-disabled="group.changed == 0">
        SAČUVAJ I PRIKAŽI
      </button>
    </div>
    <div class="mdl-card__menu">
      <button id="demo_menu-top-right" class="mdl-button mdl-js-button mdl-button--icon"
              data-upgraded=",MaterialButton">
        <i class="material-icons">more_vert</i>
      </button>
      <ul class="mdl-menu 	mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="demo_menu-top-right">
        <li disabled class="mdl-menu__item" ng-click="createReport()">GENERIRAJ PDF IZVJEŠTAJ</li>
      </ul>
    </div>
  </div>
</div>
<style>#main_image, #add_image {
  display: none;
}</style>
<script>

  $('#main_image_btn').click(function () {
    $('#main_image').click();
  });

  document.getElementById("main_image").onchange = function () {
    var reader = new FileReader();

    reader.onload = function (e) {
      // get loaded data and render thumbnail.
      document.getElementById("main_img_img").src = e.target.result;
    };

    // read the image file as a data URL.
    reader.readAsDataURL(this.files[0]);
  };
  setTimeout(function(){
    componentHandler.upgradeAllRegistered();
  }, 1000);

</script>

